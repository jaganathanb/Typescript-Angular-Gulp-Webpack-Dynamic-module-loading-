{"version":3,"sources":["app.authService.ts"],"names":["AuthService","AuthService.constructor","AuthService.login","AuthService.getFeatures","AuthService.isLoggedIn","AuthService.setCredentials","AuthService.clearCredentials"],"mappings":"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","file":"app.authService.js","sourcesContent":["/// <reference path=\"typings/tsd.d.ts\" />\r\nclass AuthService {\r\n\tpublic static $inject: Array<string> = ['base64Service', '$http', '$cookieStore', '$rootScope', '$timeout'];\r\n\t\r\n\tprivate _base64:any;\r\n\tprivate _$http: any;\r\n\tprivate _$cookieStore: any;\r\n\tprivate _$rootScope: any;\r\n\tprivate _$timeout: ng.ITimeoutService;\r\n\t\r\n\tconstructor(Base64:any, $http: any, $cookieStore: any, $rootScope: any, $timeout: ng.ITimeoutService) {\r\n\t\tthis._base64 = Base64;\r\n\t\tthis._$http = $http;\r\n\t\tthis._$cookieStore = $cookieStore;\r\n\t\tthis._$rootScope = $rootScope;\r\n\t\tthis._$timeout = $timeout;\r\n\t}\r\n\t\r\n\tlogin(username:string, password:string, callback: Function): void {\r\n\t\tthis._$timeout(() => {\r\n            var response = { success: username === 'test' && password === 'test', message: '' };\r\n            if (!response.success) {\r\n                response.message = 'Username or password is incorrect';\r\n            }\r\n            callback(response);\r\n        }, 1000);\r\n\t}\r\n\t\r\n\tgetFeatures(): Array<string> {\r\n\t\treturn this._$rootScope.globals.currentUser && this._$rootScope.globals.currentUser.features || [];\r\n\t}\r\n\t\r\n\tisLoggedIn(): boolean {\r\n\t\tvar user = this._$cookieStore.get('globals');\r\n\t\tthis._$rootScope.globals = user;\r\n\t\treturn (user && user.currentUser);\r\n\t}\r\n\t\r\n\tsetCredentials(username:string, password:string): void {\r\n\t\tvar authdata = this._base64.encode(username + ':' + password);\r\n\r\n        this._$rootScope.globals = {\r\n            currentUser: {\r\n                username: username,\r\n                authdata: authdata,\r\n\t\t\t\tfeatures: ['user', 'admin']\r\n            }\r\n        };\r\n\r\n        this._$http.defaults.headers.common['Authorization'] = 'Basic ' + authdata; // jshint ignore:line\r\n        this._$cookieStore.put('globals', this._$rootScope.globals);\t\r\n\t}\r\n\t\r\n\tclearCredentials():void {\r\n        this._$rootScope.globals = {currentUser: null};\r\n        this._$cookieStore.remove('globals');\r\n        this._$http.defaults.headers.common.Authorization = 'Basic ';\r\n    }\r\n\t\r\n}\r\n\r\nexport = AuthService;"],"sourceRoot":"/source/"}